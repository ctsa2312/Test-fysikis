<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Τεστ Φυσικής - Ηλεκτρισμός</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
    h1, h2 { color: #004080; }
    .question { margin-bottom: 20px; }
    .submit-btn { background-color: red; color: white; padding: 15px 30px; font-size: 1.2em; border: none; cursor: pointer; }
    .submit-btn:hover { background-color: darkred; }
    .feedback { margin-top: 30px; border-top: 2px solid #ccc; padding-top: 20px; }
  </style>
</head>
<body>

<h1>ΤΕΣΤ ΦΥΣΙΚΗΣ – Γ’ ΓΥΜΝΑΣΙΟΥ</h1>

<h2>Θεματική ενότητα:</h2>
<p>Ηλεκτρικό φορτίο στο εσωτερικό του ατόμου & τρόποι ηλέκτρισης (τριβή – επαφή)</p>

<p><strong>Οδηγίες:</strong></p>
<ul>
  <li>Α’ Μέρος (Ερωτήσεις 1 – 8): Επιλέξτε μία σωστή απάντηση.</li>
  <li>Β’ Μέρος (Ερωτήσεις 9 – 10): Επιλέξτε <strong>δύο</strong> σωστές απαντήσεις.</li>
</ul>

<form id="quizForm">
  <label for="studentName">Όνομα μαθητή:</label><br>
  <input type="text" id="studentName" name="studentName" required><br><br>

  <div id="questions"></div>

  <br><button type="submit" class="submit-btn">Υποβολή</button>
</form>

<div class="feedback" id="feedback"></div>

<script>
const questions = [
  {
    q: "Ποιο σωματίδιο του ατόμου φέρει αρνητικό ηλεκτρικό φορτίο;",
    options: ["πρωτόνιο", "νετρόνιο", "ηλεκτρόνιο"],
    correct: [2]
  },
  {
    q: "Ένα σώμα χαρακτηρίζεται ηλεκτρικά ουδέτερο όταν:",
    options: ["έχει ίσο αριθμό πρωτονίων και ηλεκτρονίων", "δεν έχει καθόλου ηλεκτρόνια", "έχει μόνο πρωτόνια και νετρόνια"],
    correct: [0]
  },
  {
    q: "Κατά την ηλέκτριση με τριβή, η μεταφορά φορτίου οφείλεται κυρίως σε:",
    options: ["μετατόπιση πρωτονίων από το ένα σώμα στο άλλο", "μεταφορά ηλεκτρονίων από το ένα σώμα στο άλλο", "δημιουργία νέων ηλεκτρονίων μέσα στα σώματα"],
    correct: [1]
  },
  {
    q: "Μετά από τριβή πλαστικής ράβδου με μάλλινο ύφασμα, η ράβδος φορτίζεται αρνητικά διότι:",
    options: ["χάνει ηλεκτρόνια προς το ύφασμα", "κερδίζει ηλεκτρόνια από το ύφασμα", "κερδίζει πρωτόνια από το ύφασμα"],
    correct: [1]
  },
  {
    q: "Η ηλέκτριση με επαφή διαφέρει από την τριβή, επειδή στην επαφή:",
    options: ["δεν απαιτείται μετακίνηση ηλεκτρονίων", "απαιτείται φυσική επαφή των σωμάτων χωρίς τριβή", "συμμετέχουν μόνο μονωτές και ποτέ αγωγοί"],
    correct: [1]
  },
  {
    q: "Όταν ένα θετικά φορτισμένο σώμα ακουμπήσει σε ένα ουδέτερο μεταλλικό σώμα, τότε:",
    options: ["ηλεκτρόνια μεταφέρονται προς το ουδέτερο σώμα και τελικά αποκτούν αντίθετο είδος φορτίου.",
              "πρωτόνια μεταφέρονται προς το ουδέτερο σώμα και τελικά αποκτούν ίδιο είδους φορτίο.",
              "ηλεκτρόνια μεταφέρονται προς το φορτισμένο σώμα και τελικά αποκτούν ίδιο είδους φορτίο."],
    correct: [2]
  },
  {
    q: "Το μέγεθος του ηλεκτρικού φορτίου μετριέται στο SI σε:",
    options: ["Volt (V)", "Ampere (A)", "Coulomb (C)"],
    correct: [2]
  },
  {
    q: "Σε ατομικό επίπεδο, τα ηλεκτρόνια συγκρατούνται γύρω από τον πυρήνα με:",
    options: ["ηλεκτρικές ελκτικές δυνάμεις από τα πρωτόνια",
              "βαρυτικές δυνάμεις μεταξύ ηλεκτρονίων και νετρονίων",
              "μαγνητικές δυνάμεις από τα νετρόνια"],
    correct: [0]
  },
  {
    q: "Ποιοι από τους παρακάτω τρόπους μπορούν να προκαλέσουν αλλαγή στο φορτίο των δύο σωμάτων όταν ηλεκτρίζονται;",
    options: ["Τριβή δύο μονωτών", "Επαφή ουδέτερου με φορτισμένο αγωγό", "Θέρμανση του σώματος", "Εκπομπή φωτός στο σώμα", "Επαγωγή (προσέγγιση φορτισμένου σώματος χωρίς επαφή)"],
    correct: [0,1]
  },
  {
    q: "Ποιες μικροσκοπικές διαδικασίες περιγράφουν σωστά την ηλέκτριση με τριβή δύο αρχικά αφόρτιστων σωμάτων;",
    options: ["Ηλεκτρόνια αποκολλώνται από το ένα υλικό και μεταφέρονται στο άλλο", "Πρωτόνια περνούν διαμέσου της ζώνης αγωγιμότητας των υλικών", "Το υλικό που αποκτά θετικό φορτίο χάνει ηλεκτρόνια", "Δημιουργούνται νέα ζεύγη ηλεκτρονίων–οπών μέσα στα άτομα", "Τα νετρόνια μετατρέπονται σε πρωτόνια και ηλεκτρόνια"],
    correct: [0,2]
  }
];

const form = document.getElementById("quizForm");
const container = document.getElementById("questions");

questions.forEach((q, index) => {
  const div = document.createElement("div");
  div.className = "question";
  div.innerHTML = `<strong>${index + 1}. ${q.q}</strong><br>`;
  q.options.forEach((opt, i) => {
    const type = q.correct.length === 1 ? 'radio' : 'checkbox';
    div.innerHTML += `<input type="${type}" name="q${index}" value="${i}"> ${opt}<br>`;
  });
  container.appendChild(div);
});

form.addEventListener("submit", function(e) {
  e.preventDefault();
  const formData = new FormData(form);
  const name = formData.get("studentName");
  let score = 0;
  const answers = [];

  questions.forEach((q, index) => {
    const ans = formData.getAll(`q${index}`).map(Number);
    answers.push(ans.map(i => q.options[i] || "").join("; "));
    const correct = q.correct;
    const isCorrect = correct.length === ans.length && correct.every(a => ans.includes(a));
    if (isCorrect) score += correct.length === 1 ? 2 : 1 * correct.length;
  });

  fetch("https://script.google.com/macros/s/AKfycbzHIjxEiTyOVO6mEP8AlPcw21GnHwj1S06eidnR6oC2SqtRKJIVhzi1SeoHxyDqZtyOew/exec", {
    method: "POST",
    body: JSON.stringify({ name, score, answers }),
    headers: { "Content-Type": "application/json" }
  }).then(res => res.text()).then(result => {
    document.getElementById("feedback").innerHTML += `<p><em>Αποθηκεύτηκε στο Google Sheet.</em></p>`;
  }).catch(err => {
    document.getElementById("feedback").innerHTML += `<p><em>Σφάλμα κατά την αποθήκευση: ${err.message}</em></p>`;
  });

  let feedback = `<h3>Αποτελέσματα:</h3><ul>`;
  questions.forEach((q, index) => {
    const ans = formData.getAll(`q${index}`).map(Number);
    const correct = q.correct;
    const isCorrect = correct.length === ans.length && correct.every(a => ans.includes(a));
    feedback += `<li><strong>Ερώτηση ${index + 1}</strong>: ${isCorrect ? 'Σωστό' : 'Λάθος'}<br>`;
    feedback += `Η σωστή απάντηση: ${correct.map(i => q.options[i]).join(", ")}<br>`;
    if (!isCorrect) feedback += `<em>Επέλεξες: ${ans.map(i => q.options[i] || '(καμία)').join(", ")}</em>`;
    feedback += `</li>`;
  });
  feedback += `</ul><h3>Τελική Βαθμολογία: ${score}/20</h3>`;
  document.getElementById("feedback").innerHTML = feedback;
});
</script>

</body>
</html>
